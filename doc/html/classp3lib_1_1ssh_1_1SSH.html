<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>p3lib: SSH Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">p3lib
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacep3lib.html">p3lib</a></li><li class="navelem"><a class="el" href="namespacep3lib_1_1ssh.html">ssh</a></li><li class="navelem"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html">SSH</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classp3lib_1_1ssh_1_1SSH-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SSH Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for SSH:</div>
<div class="dyncontent">
<div class="center"><img src="classp3lib_1_1ssh_1_1SSH__inherit__graph.png" border="0" usemap="#SSH_inherit__map" alt="Inheritance graph"/></div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for SSH:</div>
<div class="dyncontent">
<div class="center"><img src="classp3lib_1_1ssh_1_1SSH__coll__graph.png" border="0" usemap="#SSH_coll__map" alt="Collaboration graph"/></div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a63f9de325d0dff4a3f19b270e6ce18e1"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a63f9de325d0dff4a3f19b270e6ce18e1">__init__</a> (self, host, username, password=None, <a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a2bf2cf5408f4dedc8b228b30e749cd77">useCompression</a>=True, port=22, uio=None, privateKeyFile=None)</td></tr>
<tr class="separator:a63f9de325d0dff4a3f19b270e6ce18e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8639372c33e15084a7f7c4d9d87b7bfe"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a8639372c33e15084a7f7c4d9d87b7bfe">close</a> (self)</td></tr>
<tr class="separator:a8639372c33e15084a7f7c4d9d87b7bfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa21bfc78212d0eebde80867f56adb99e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#aa21bfc78212d0eebde80867f56adb99e">connect</a> (self, enableAutoLoginSetup=False, connectSFTPSession=False, timeout=<a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a65c4819af45274af22b9d86b5ed867bf">DEFAULT_SSH_CONNECTION_TIMEOUT</a>)</td></tr>
<tr class="separator:aa21bfc78212d0eebde80867f56adb99e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ae71d6e552a523f817f77248d48fc71"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a8ae71d6e552a523f817f77248d48fc71">getAuthKeyBackupFile</a> (self, maxBackupFileCount=10)</td></tr>
<tr class="separator:a8ae71d6e552a523f817f77248d48fc71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5db67e026ff8938d909a44f15f553b42"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a5db67e026ff8938d909a44f15f553b42">getFile</a> (self, remoteFilePath, localFilePath)</td></tr>
<tr class="separator:a5db67e026ff8938d909a44f15f553b42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2a230681b70bddd918ee2d8749a69bd"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#ae2a230681b70bddd918ee2d8749a69bd">getLocalAddress</a> (self)</td></tr>
<tr class="separator:ae2a230681b70bddd918ee2d8749a69bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43b1d11f521ec29bcdbe637cfc7ede28"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a43b1d11f521ec29bcdbe637cfc7ede28">getRemoteAuthorisedKeyFile</a> (self)</td></tr>
<tr class="separator:a43b1d11f521ec29bcdbe637cfc7ede28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cf1bf86681dffce505f0976851b4b81"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a3cf1bf86681dffce505f0976851b4b81">getRemoteAuthorisedKeys</a> (self)</td></tr>
<tr class="separator:a3cf1bf86681dffce505f0976851b4b81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d147ac4f51c235b656f63d3c62ef546"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a1d147ac4f51c235b656f63d3c62ef546">getSSHClient</a> (self)</td></tr>
<tr class="separator:a1d147ac4f51c235b656f63d3c62ef546"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab86207fad63b452e3a330bb000b8637b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#ab86207fad63b452e3a330bb000b8637b">getTransport</a> (self)</td></tr>
<tr class="separator:ab86207fad63b452e3a330bb000b8637b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6db9cc9327a3049807e1ff6b225c1bab"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a6db9cc9327a3049807e1ff6b225c1bab">putFile</a> (self, localFilePath, remoteFilePath)</td></tr>
<tr class="separator:a6db9cc9327a3049807e1ff6b225c1bab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba622bc010c86c1d18ecff70ec616c44"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#aba622bc010c86c1d18ecff70ec616c44">removeAuthKey</a> (self, publicKey)</td></tr>
<tr class="separator:aba622bc010c86c1d18ecff70ec616c44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5107acdb3ff67313176f4a34e53a225"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#af5107acdb3ff67313176f4a34e53a225">runCmd</a> (self, cmd, throwError=True, timeout=None)</td></tr>
<tr class="separator:af5107acdb3ff67313176f4a34e53a225"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf452c138fb041152d4c7787c0a791a4"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#abf452c138fb041152d4c7787c0a791a4">startCmd</a> (self, cmd)</td></tr>
<tr class="separator:abf452c138fb041152d4c7787c0a791a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5461f7cadaf199660f0ad3c3c9325576"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a5461f7cadaf199660f0ad3c3c9325576">updateAuthorisedKeys</a> (self, publicKey)</td></tr>
<tr class="separator:a5461f7cadaf199660f0ad3c3c9325576"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a6eff08890a77e46d336dda3eb5913239"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a6eff08890a77e46d336dda3eb5913239">AddKey</a> (privateKey)</td></tr>
<tr class="separator:a6eff08890a77e46d336dda3eb5913239"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5be1446df18f673e95eecf60ad7a307d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a5be1446df18f673e95eecf60ad7a307d">GetPrivateKeyFile</a> ()</td></tr>
<tr class="separator:a5be1446df18f673e95eecf60ad7a307d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d572e783802443bb8138c713f8097d4"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a6d572e783802443bb8138c713f8097d4">GetPrivateKeyFileList</a> ()</td></tr>
<tr class="separator:a6d572e783802443bb8138c713f8097d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00d529c779cb6a70b504def9b251c998"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a00d529c779cb6a70b504def9b251c998">GetPublicKey</a> ()</td></tr>
<tr class="separator:a00d529c779cb6a70b504def9b251c998"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c038c980b4c16215ce62ac80b52812a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a8c038c980b4c16215ce62ac80b52812a">GetPublicKeyFile</a> ()</td></tr>
<tr class="separator:a8c038c980b4c16215ce62ac80b52812a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4192062b7b1453653b41126cb6c60225"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a4192062b7b1453653b41126cb6c60225">GetPublicKeyFileList</a> ()</td></tr>
<tr class="separator:a4192062b7b1453653b41126cb6c60225"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5159b27e1695b401c005da92c6c3bc58"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a5159b27e1695b401c005da92c6c3bc58">GetSSHKeyAttributes</a> (authKey)</td></tr>
<tr class="separator:a5159b27e1695b401c005da92c6c3bc58"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a2bf2cf5408f4dedc8b228b30e749cd77"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a2bf2cf5408f4dedc8b228b30e749cd77">useCompression</a></td></tr>
<tr class="separator:a2bf2cf5408f4dedc8b228b30e749cd77"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:adb0128662c1afdc399b782c6044a30ae"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#adb0128662c1afdc399b782c6044a30ae">DEFAULT_REMOTE_SSH_AUTH_KEYS_FILE</a> = &quot;~/.ssh/authorized_keys&quot;</td></tr>
<tr class="separator:adb0128662c1afdc399b782c6044a30ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65c4819af45274af22b9d86b5ed867bf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a65c4819af45274af22b9d86b5ed867bf">DEFAULT_SSH_CONNECTION_TIMEOUT</a> = 20</td></tr>
<tr class="separator:a65c4819af45274af22b9d86b5ed867bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a868b0fde222ded483d1c900935cbb5d1"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a868b0fde222ded483d1c900935cbb5d1">DROPBEAR_AUTH_KEYS_FILE</a> = &quot;%s/authorized_keys&quot; % (DROPBEAR_DIR)</td></tr>
<tr class="separator:a868b0fde222ded483d1c900935cbb5d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0bf4066aaa07ef2c63c3dd462ccb485"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#aa0bf4066aaa07ef2c63c3dd462ccb485">DROPBEAR_DIR</a> = &quot;/etc/dropbear&quot;</td></tr>
<tr class="separator:aa0bf4066aaa07ef2c63c3dd462ccb485"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4ca93ae6d3ea99d367ba0114ad22772"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#aa4ca93ae6d3ea99d367ba0114ad22772">LOCAL_SSH_CONFIG_PATH</a> = os.path.join(os.path.expanduser(&quot;~&quot;), &quot;.ssh&quot;)</td></tr>
<tr class="separator:aa4ca93ae6d3ea99d367ba0114ad22772"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61bc9407da40be50e88b807e59950eb2"><td class="memItemLeft" align="right" valign="top">list&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a61bc9407da40be50e88b807e59950eb2">PRIVATE_KEY_FILE_LIST</a> = [&quot;id_rsa&quot;, &quot;id_dsa&quot;, 'id_ecdsa']</td></tr>
<tr class="separator:a61bc9407da40be50e88b807e59950eb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c1ebf55737e86f832cfcae61deef8d1"><td class="memItemLeft" align="right" valign="top">list&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a1c1ebf55737e86f832cfcae61deef8d1">PUBLIC_KEY_FILE_LIST</a> = [&quot;id_rsa.pub&quot;, &quot;id_dsa.pub&quot;, 'id_ecdsa.pub']</td></tr>
<tr class="separator:a1c1ebf55737e86f832cfcae61deef8d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cf8380be620bc7a6bd66bb973fbf4dc"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a4cf8380be620bc7a6bd66bb973fbf4dc">SERVER_AUTHORISED_KEYS_FILE</a> = &quot;~/.ssh/authorized_keys&quot;</td></tr>
<tr class="separator:a4cf8380be620bc7a6bd66bb973fbf4dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fe4ecbede677d6d4629eddaf568a19b"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a7fe4ecbede677d6d4629eddaf568a19b">SSH_COPY_PROG</a> = &quot;/usr/bin/ssh-copy-id&quot;</td></tr>
<tr class="separator:a7fe4ecbede677d6d4629eddaf568a19b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">@brief responsible for connecting an ssh connection, excuting commands.</pre> 
<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00119">119</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a63f9de325d0dff4a3f19b270e6ce18e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63f9de325d0dff4a3f19b270e6ce18e1">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def __init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>password</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>useCompression</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>port</em> = <code>22</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>uio</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>privateKeyFile</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Constructor
   @param host The SSH hostname
   @param username The ssh username
   @param password The ssh password (default=None)
   @param useCompression If True then use compression on the ssh session (default=True)
   @param port The ssh port number (default = 22)
   @param uio A UIO instance (default=None)
   @param privateKeyFile The private ssh keyfile (default=None=Use default private keyfile)</pre> 
<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00269">269</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keyword">def </span>__init__(self, host, username, password=None, useCompression=True, port=22, uio=None, privateKeyFile = None):</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;@brief Constructor</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="stringliteral">           @param host The SSH hostname</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="stringliteral">           @param username The ssh username</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="stringliteral">           @param password The ssh password (default=None)</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="stringliteral">           @param useCompression If True then use compression on the ssh session (default=True)</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="stringliteral">           @param port The ssh port number (default = 22)</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="stringliteral">           @param uio A UIO instance (default=None)</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="stringliteral">           @param privateKeyFile The private ssh keyfile (default=None=Use default private keyfile)</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="stringliteral">           &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        self._host              = host</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        self._port              = port</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        self._username          = username</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        self._localAddress      = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        self.useCompression     = useCompression</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        self._password          = password</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        self._uio               = uio</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keywordflow">if</span> privateKeyFile:</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            SSH.AddKey(privateKeyFile)</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        self._ssh = ExtendedSSHClient()</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        logging.getLogger(<span class="stringliteral">&quot;paramiko&quot;</span>).setLevel(logging.WARNING)</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        self._ssh.set_missing_host_key_policy(AutoAddPolicy())</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        self._sftp = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a6eff08890a77e46d336dda3eb5913239"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6eff08890a77e46d336dda3eb5913239">&#9670;&nbsp;</a></span>AddKey()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def AddKey </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>privateKey</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">@brief Add a key to the list of keys that will be tried when connecting to an ssh server.
  This method should be called before instantiating the SSH class. If a key is
  already present it won't be added to avoid duplicates.
   @param privateKey The name of the private key file in the ~/.ssh folder. The public
             key file must have the same name with a .pub extension.</pre> 
<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00133">133</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keyword">def </span>AddKey(privateKey):</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;@brief Add a key to the list of keys that will be tried when connecting to an ssh server.</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="stringliteral">                  This method should be called before instantiating the SSH class. If a key is</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="stringliteral">                  already present it won&#39;t be added to avoid duplicates.</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="stringliteral">           @param privateKey The name of the private key file in the ~/.ssh folder. The public</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="stringliteral">                             key file must have the same name with a .pub extension.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keywordflow">if</span> privateKey <span class="keywordflow">not</span> <span class="keywordflow">in</span> SSH.PRIVATE_KEY_FILE_LIST:</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            SSH.PRIVATE_KEY_FILE_LIST.insert(0, privateKey)</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">if</span> privateKey <span class="keywordflow">not</span> <span class="keywordflow">in</span> SSH.PUBLIC_KEY_FILE_LIST:</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            SSH.PUBLIC_KEY_FILE_LIST.insert(0, privateKey+<span class="stringliteral">&quot;.pub&quot;</span>)</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8639372c33e15084a7f7c4d9d87b7bfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8639372c33e15084a7f7c4d9d87b7bfe">&#9670;&nbsp;</a></span>close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def close </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Close an open ssh connection.</pre> 
<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00365">365</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keyword">def </span>close(self):</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;@brief Close an open ssh connection.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordflow">if</span> self._ssh:</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            self._ssh.close()</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            self._ssh = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">if</span> self._sftp:</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            self._sftp = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="aa21bfc78212d0eebde80867f56adb99e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa21bfc78212d0eebde80867f56adb99e">&#9670;&nbsp;</a></span>connect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def connect </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>enableAutoLoginSetup</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>connectSFTPSession</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>timeout</em> = <code><a class="el" href="classp3lib_1_1ssh_1_1SSH.html#a65c4819af45274af22b9d86b5ed867bf">DEFAULT_SSH_CONNECTION_TIMEOUT</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Connect the ssh connection
   @param enableAutoLoginSetup If True and auto login is not setup the
  user is prompted for the password and the local ssh public key
  is copied to the server.
   @param connectSFTPSession If True then just after the ssh connection
  is built an SFT session will be built ready for file transfer.
   @param timeout The connection timeout in seconds.
   @return True if connected without setting up auto login. False if auto
   login was setup for connection to succeed.</pre> 
<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00407">407</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keyword">def </span>connect(self, enableAutoLoginSetup=False, connectSFTPSession=False, timeout=DEFAULT_SSH_CONNECTION_TIMEOUT):</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;@brief Connect the ssh connection</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="stringliteral">           @param enableAutoLoginSetup If True and auto login is not setup the</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="stringliteral">                  user is prompted for the password and the local ssh public key</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="stringliteral">                  is copied to the server.</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="stringliteral">           @param connectSFTPSession If True then just after the ssh connection</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="stringliteral">                  is built an SFT session will be built ready for file transfer.</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="stringliteral">           @param timeout The connection timeout in seconds.</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="stringliteral">           @return True if connected without setting up auto login. False if auto</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="stringliteral">                   login was setup for connection to succeed.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        setupAutoLogin = <span class="keyword">False</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            self._connect(connectSFTPSession=connectSFTPSession, timeout=timeout)</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="keywordflow">except</span> AuthenticationException:</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            self._setupAutologin(timeout)</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            self._connect(connectSFTPSession=connectSFTPSession, timeout=timeout)</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            setupAutoLogin = <span class="keyword">True</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordflow">return</span> setupAutoLogin</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8ae71d6e552a523f817f77248d48fc71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ae71d6e552a523f817f77248d48fc71">&#9670;&nbsp;</a></span>getAuthKeyBackupFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def getAuthKeyBackupFile </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>maxBackupFileCount</em> = <code>10</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Get the name of the backup name for the authorised keys file.
   @param maxBackupFileCount The maximum number of backup files to keep.
   @return None
   - We create up to maxBackupFileCount backup files.
   - Once all the backup files have been created we always replace the oldest
     backup file.
   - The backup files have the suffix .backup1, .backup2 etc.
</pre> 
<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00538">538</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keyword">def </span>getAuthKeyBackupFile(self, maxBackupFileCount=10):</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;@brief Get the name of the backup name for the authorised keys file.</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="stringliteral">           @param maxBackupFileCount The maximum number of backup files to keep.</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="stringliteral">           @return None</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="stringliteral">           - We create up to maxBackupFileCount backup files.</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="stringliteral">           - Once all the backup files have been created we always replace the oldest</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="stringliteral">             backup file.</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="stringliteral">           - The backup files have the suffix .backup1, .backup2 etc.</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        authKeysFile = self.getRemoteAuthorisedKeyFile()</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        authKeyBackupFilePart = <span class="stringliteral">&quot;%s.backup&quot;</span> % (authKeysFile)</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        suffixNum = 1</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keywordflow">while</span> <span class="keyword">True</span>:</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            authKeyBackupFileName = <span class="stringliteral">&quot;%s%d&quot;</span> % (authKeyBackupFilePart, suffixNum)</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            rc, stdoutLines, stderrLines = self.runCmd(<span class="stringliteral">&quot;test -f %s&quot;</span> % (authKeyBackupFileName), throwError=<span class="keyword">False</span>)</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            <span class="keywordflow">if</span> rc != 0:</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                <span class="keywordflow">return</span> authKeyBackupFileName</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            <span class="comment"># If all the backup files have been created</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            <span class="keywordflow">if</span> suffixNum &gt;= maxBackupFileCount:</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                <span class="comment"># List the files in creation order (oldest first)</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                rc, stdoutLines, stderrLines = self.runCmd(<span class="stringliteral">&quot;ls -ltr %s*&quot;</span> % (authKeyBackupFilePart), throwError=<span class="keyword">False</span>)</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                <span class="keywordflow">if</span> rc == 0:</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                    <span class="keywordflow">if</span> len(stdoutLines) &gt; 0:</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                        elems = stdoutLines[0].split()</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                        <span class="keywordflow">if</span> len(elems) &gt; 0:</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                            <span class="comment"># Return the oldest file as the next backup filename so that we roll</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                            <span class="comment"># around the always replacing the oldest backup file.</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                            backupfile = elems[len(elems) - 1]</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                            <span class="keywordflow">return</span> backupfile</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                <span class="keywordflow">raise</span> SSHError(<span class="stringliteral">&quot;Unable to %s to %s. Please manually remove the backup files on the ssh server.&quot;</span> % (</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                authKeysFile, authKeyBackupFilePart))</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            suffixNum = suffixNum + 1</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5db67e026ff8938d909a44f15f553b42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5db67e026ff8938d909a44f15f553b42">&#9670;&nbsp;</a></span>getFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def getFile </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>remoteFilePath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>localFilePath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Get a file from the sftp server
   @param remoteFilePath The remote file on the ssh server.
   @param localFilePath The path of the file after it's been received</pre> 
<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00520">520</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keyword">def </span>getFile(self, remoteFilePath, localFilePath ):</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;@brief Get a file from the sftp server</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="stringliteral">           @param remoteFilePath The remote file on the ssh server.</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="stringliteral">           @param localFilePath The path of the file after it&#39;s been received&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="keywordflow">if</span> self._sftp:</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            self._sftp.get(remoteFilePath,localFilePath)</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            <span class="keywordflow">raise</span> SSHError(<span class="stringliteral">&quot;SFTP not connected.&quot;</span>)</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="ae2a230681b70bddd918ee2d8749a69bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2a230681b70bddd918ee2d8749a69bd">&#9670;&nbsp;</a></span>getLocalAddress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def getLocalAddress </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Get the local IP address of the network interface used to connect to the ssh server</pre> 
<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00357">357</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keyword">def </span>getLocalAddress(self):</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;@brief Get the local IP address of the network interface used to connect to the ssh server&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <span class="keywordflow">return</span> self._localAddress</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5be1446df18f673e95eecf60ad7a307d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5be1446df18f673e95eecf60ad7a307d">&#9670;&nbsp;</a></span>GetPrivateKeyFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def GetPrivateKeyFile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">@brief Get the private key file from the &lt;HOME&gt;/.ssh</pre> 
<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00184">184</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keyword">def </span>GetPrivateKeyFile():</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;@brief Get the private key file from the &lt;HOME&gt;/.ssh&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        homeFolder = SSH.LOCAL_SSH_CONFIG_PATH</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> os.path.isdir(homeFolder):</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            username = getuser()</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            <span class="keywordflow">if</span> username == <span class="stringliteral">&#39;root&#39;</span>:</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                homeFolder = <span class="stringliteral">&#39;/root/.ssh&#39;</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                homeFolder = <span class="stringliteral">&#39;/home/%s/.ssh&#39;</span> % (username)</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">for</span> key <span class="keywordflow">in</span> SSH.PRIVATE_KEY_FILE_LIST:</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            keyFile = os.path.join(homeFolder, key)</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            <span class="keywordflow">if</span> os.path.isfile(keyFile):</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                <span class="keywordflow">return</span> keyFile</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keywordflow">raise</span> SSHError(<span class="stringliteral">&quot;Unable to find a public key file. Please use the &#39;ssh-keygen -t rsa&#39; command to generate a key pair.&quot;</span>)</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a6d572e783802443bb8138c713f8097d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d572e783802443bb8138c713f8097d4">&#9670;&nbsp;</a></span>GetPrivateKeyFileList()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def GetPrivateKeyFileList </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">@brief Get a list of private key files that exist locally in &lt;HOME&gt;/.ssh</pre> 
<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00202">202</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keyword">def </span>GetPrivateKeyFileList():</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;@brief Get a list of private key files that exist locally in &lt;HOME&gt;/.ssh&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        homeFolder = SSH.LOCAL_SSH_CONFIG_PATH</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> os.path.isdir(homeFolder):</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            username = getuser()</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <span class="keywordflow">if</span> username == <span class="stringliteral">&#39;root&#39;</span>:</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                homeFolder = <span class="stringliteral">&#39;/root/.ssh&#39;</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                homeFolder = <span class="stringliteral">&#39;/home/%s/.ssh&#39;</span> % (username)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        keyFileList = []</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordflow">for</span> key <span class="keywordflow">in</span> SSH.PRIVATE_KEY_FILE_LIST:</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            keyFile = os.path.join(homeFolder, key)</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <span class="keywordflow">if</span> os.path.isfile(keyFile):</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                <span class="keywordflow">if</span> keyFile <span class="keywordflow">not</span> <span class="keywordflow">in</span> keyFileList:</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                    keyFileList.append(keyFile)</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">return</span> keyFileList</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a00d529c779cb6a70b504def9b251c998"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00d529c779cb6a70b504def9b251c998">&#9670;&nbsp;</a></span>GetPublicKey()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def GetPublicKey </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">@brief Get the public ssh key from the local machine
   @return The public key.</pre> 
<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00221">221</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keyword">def </span>GetPublicKey():</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;@brief Get the public ssh key from the local machine</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="stringliteral">           @return The public key.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        pubKeyFile = SSH.GetPublicKeyFile()</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        fd = open(pubKeyFile, <span class="stringliteral">&#39;r&#39;</span>)</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        lines = fd.readlines()</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        fd.close()</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="keywordflow">if</span> len(lines) &lt; 1:</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <span class="keywordflow">raise</span> SSHError(<span class="stringliteral">&quot;No public key text found in the %s file on the local computer.&quot;</span> % (pubKeyFile))</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        publicKey = lines[0]</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        publicKey = publicKey.strip(<span class="stringliteral">&#39;\n&#39;</span>)</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        publicKey = publicKey.strip(<span class="stringliteral">&#39;\r&#39;</span>)</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        publicKey = publicKey.strip()</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="keywordflow">return</span> publicKey</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a8c038c980b4c16215ce62ac80b52812a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c038c980b4c16215ce62ac80b52812a">&#9670;&nbsp;</a></span>GetPublicKeyFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def GetPublicKeyFile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">@brief Get the public key file from the &lt;HOME&gt;/.ssh</pre> 
<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00146">146</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keyword">def </span>GetPublicKeyFile():</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;@brief Get the public key file from the &lt;HOME&gt;/.ssh&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        homeFolder = SSH.LOCAL_SSH_CONFIG_PATH</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> os.path.isdir(homeFolder):</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            username = getuser()</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            <span class="keywordflow">if</span> username == <span class="stringliteral">&#39;root&#39;</span>:</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                homeFolder = <span class="stringliteral">&#39;/root/.ssh&#39;</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                homeFolder = <span class="stringliteral">&#39;/home/%s/.ssh&#39;</span> % (username)</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordflow">for</span> key <span class="keywordflow">in</span> SSH.PUBLIC_KEY_FILE_LIST:</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            keyFile = os.path.join(homeFolder, key)</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <span class="keywordflow">if</span> os.path.isfile(keyFile):</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                <span class="keywordflow">return</span> keyFile</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="keywordflow">raise</span> SSHError(<span class="stringliteral">&quot;Unable to find a public key file. Please use the &#39;ssh-keygen -t rsa&#39; command to generate a key pair.&quot;</span>)</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a4192062b7b1453653b41126cb6c60225"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4192062b7b1453653b41126cb6c60225">&#9670;&nbsp;</a></span>GetPublicKeyFileList()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def GetPublicKeyFileList </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">@brief Get a list of public key files that exist locally in &lt;HOME&gt;/.ssh</pre> 
<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00164">164</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keyword">def </span>GetPublicKeyFileList():</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;@brief Get a list of public key files that exist locally in &lt;HOME&gt;/.ssh&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        homeFolder = SSH.LOCAL_SSH_CONFIG_PATH</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> os.path.isdir(homeFolder):</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            username = getuser()</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <span class="keywordflow">if</span> username == <span class="stringliteral">&#39;root&#39;</span>:</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                homeFolder = <span class="stringliteral">&#39;/root/.ssh&#39;</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                homeFolder = <span class="stringliteral">&#39;/home/%s/.ssh&#39;</span> % (username)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        keyFileList = []</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keywordflow">for</span> key <span class="keywordflow">in</span> SSH.PUBLIC_KEY_FILE_LIST:</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            keyFile = os.path.join(homeFolder, key)</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <span class="keywordflow">if</span> os.path.isfile(keyFile):</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                <span class="keywordflow">if</span> keyFile <span class="keywordflow">not</span> <span class="keywordflow">in</span> keyFileList:</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                    keyFileList.append(keyFile)</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">return</span> keyFileList</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a43b1d11f521ec29bcdbe637cfc7ede28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43b1d11f521ec29bcdbe637cfc7ede28">&#9670;&nbsp;</a></span>getRemoteAuthorisedKeyFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def getRemoteAuthorisedKeyFile </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Return the remote authorised key file for the current ssh connection.</pre> 
<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00508">508</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keyword">def </span>getRemoteAuthorisedKeyFile(self):</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;@brief Return the remote authorised key file for the current ssh connection.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        authKeysFile = SSH.DEFAULT_REMOTE_SSH_AUTH_KEYS_FILE</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        cmd = <span class="stringliteral">&quot;test -d %s&quot;</span> % (SSH.DROPBEAR_DIR)</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        rc, stdoutLines, stderrLines = self.runCmd(cmd, throwError=<span class="keyword">False</span>)</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <span class="keywordflow">if</span> rc == 0:</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            authKeysFile = SSH.DROPBEAR_AUTH_KEYS_FILE</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keywordflow">return</span> authKeysFile</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a3cf1bf86681dffce505f0976851b4b81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cf1bf86681dffce505f0976851b4b81">&#9670;&nbsp;</a></span>getRemoteAuthorisedKeys()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def getRemoteAuthorisedKeys </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Get the remote authorised keys file over the ssh connection.</pre> 
<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00485">485</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keyword">def </span>getRemoteAuthorisedKeys(self):</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Get the remote authorised keys file over the ssh connection.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        authKeysFile = self.getRemoteAuthorisedKeyFile()</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        cmd = <span class="stringliteral">&quot;test -f %s&quot;</span> % (authKeysFile)</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        rc, stdoutLines, stderrLines = self.runCmd(cmd, throwError=<span class="keyword">False</span>)</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="keywordflow">if</span> rc != 0:</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            <span class="comment"># Auth keys file not found, attempt to create an empty one.</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            cmd = <span class="stringliteral">&quot;touch %s&quot;</span> % (authKeysFile)</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            rc, stdoutLines, stderrLines = self.runCmd(cmd, throwError=<span class="keyword">False</span>)</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            cmd = <span class="stringliteral">&quot;test -f %s&quot;</span> % (authKeysFile)</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            rc, stdoutLines, stderrLines = self.runCmd(cmd, throwError=<span class="keyword">False</span>)</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            <span class="keywordflow">if</span> rc != 0:</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                <span class="keywordflow">raise</span> SSHError(<span class="stringliteral">&quot;!!! Server auth keys file not found (%s). Failed to create it.&quot;</span> % (authKeysFile))</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; </div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        rc, stdoutLines, stderrLines = self.runCmd(<span class="stringliteral">&quot;cat %s&quot;</span> % (authKeysFile), throwError=<span class="keyword">False</span>)</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="comment"># Ensure we only return non empty lines</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        authKeyLines = []</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <span class="keywordflow">for</span> l <span class="keywordflow">in</span> stdoutLines:</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            <span class="keywordflow">if</span> len(l.strip()) &gt; 0:</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                authKeyLines.append(l)</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keywordflow">return</span> authKeyLines</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a1d147ac4f51c235b656f63d3c62ef546"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d147ac4f51c235b656f63d3c62ef546">&#9670;&nbsp;</a></span>getSSHClient()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def getSSHClient </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief return a ref to the SSHClient object</pre> 
<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00361">361</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keyword">def </span>getSSHClient(self):</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;@brief return a ref to the SSHClient object&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">return</span> self._ssh</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5159b27e1695b401c005da92c6c3bc58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5159b27e1695b401c005da92c6c3bc58">&#9670;&nbsp;</a></span>GetSSHKeyAttributes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def GetSSHKeyAttributes </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>authKey</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">@brief Extract the following from an ssh key and return them in a tuple.
   @return a tuple containing

   hostname
   username
   keytype
   key

   If unable to extract the above attributes then None is returned.
</pre> 
<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00240">240</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keyword">def </span>GetSSHKeyAttributes(authKey):</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;@brief Extract the following from an ssh key and return them in a tuple.</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="stringliteral">           @return a tuple containing</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="stringliteral">           hostname</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="stringliteral">           username</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="stringliteral">           keytype</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="stringliteral">           key</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="stringliteral">           If unable to extract the above attributes then None is returned.</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        hostname = <span class="keywordtype">None</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        elems = authKey.split()</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keywordflow">if</span> len(elems) &gt; 2:</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            keytype = elems[0]</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            key = elems[1]</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            tmpElems = elems[2].split(<span class="stringliteral">&quot;@&quot;</span>)</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            <span class="keywordflow">if</span> len(tmpElems) &gt; 1:</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                username = tmpElems[0]</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                hostname = tmpElems[1]</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                username = elems[2]</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                hostname = <span class="stringliteral">&quot;?&quot;</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keywordflow">if</span> hostname != <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <span class="keywordflow">return</span> (hostname, username, keytype, key)</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordflow">return</span> (<span class="keywordtype">None</span>, <span class="keywordtype">None</span>, <span class="keywordtype">None</span>, <span class="keywordtype">None</span>)</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="ab86207fad63b452e3a330bb000b8637b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab86207fad63b452e3a330bb000b8637b">&#9670;&nbsp;</a></span>getTransport()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def getTransport </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Get the ssh transport object. Should only be
  called when the ssh session is connected.
   @return The ssh transport object.</pre> 
<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00374">374</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keyword">def </span>getTransport(self):</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;@brief Get the ssh transport object. Should only be</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="stringliteral">                  called when the ssh session is connected.</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="stringliteral">           @return The ssh transport object.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keywordflow">return</span> self._ssh.get_transport()</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a6db9cc9327a3049807e1ff6b225c1bab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6db9cc9327a3049807e1ff6b225c1bab">&#9670;&nbsp;</a></span>putFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def putFile </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>localFilePath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>remoteFilePath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Get a file from the sftp server
   @param localFilePath The path of the file after it's been received
   @param remoteFilePath The remote file on the ssh server.</pre> 
<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00529">529</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keyword">def </span>putFile(self, localFilePath, remoteFilePath ):</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;@brief Get a file from the sftp server</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="stringliteral">           @param localFilePath The path of the file after it&#39;s been received</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="stringliteral">           @param remoteFilePath The remote file on the ssh server.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <span class="keywordflow">if</span> self._sftp:</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            self._sftp.put(localFilePath, remoteFilePath)</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <span class="keywordflow">raise</span> SSHError(<span class="stringliteral">&quot;SFTP not connected.&quot;</span>)</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="aba622bc010c86c1d18ecff70ec616c44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba622bc010c86c1d18ecff70ec616c44">&#9670;&nbsp;</a></span>removeAuthKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def removeAuthKey </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>publicKey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Remove authorised keys from the server authorised keys file.
   @param publicKeysForRemoval A list of public keys for removal.</pre> 
<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00581">581</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keyword">def </span>removeAuthKey(self, publicKey):</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;@brief Remove authorised keys from the server authorised keys file.</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="stringliteral">           @param publicKeysForRemoval A list of public keys for removal.&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        remove = <span class="keyword">False</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        previousAuthKeysFile = self.getAuthKeyBackupFile()</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        publicKeyID = self._getPublicKeyID(publicKey)</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        self._info(<span class="stringliteral">&quot;Public ssh key ID: {}&quot;</span>.format(publicKeyID))</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        authKeysFile = self.getRemoteAuthorisedKeyFile()</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        tmpAuthKeysFile = <span class="stringliteral">&quot;%s.tmp&quot;</span> % (authKeysFile)</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        retCode, publicKeyList, _ = self.runCmd(<span class="stringliteral">&quot;cat {}&quot;</span>.format(authKeysFile), throwError=<span class="keyword">False</span>)</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="keywordflow">if</span> retCode == 0:</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            newAuthKeysList = []</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            <span class="keywordflow">for</span> publicKey <span class="keywordflow">in</span> publicKeyList:</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                <span class="keywordflow">if</span> publicKey.find(publicKeyID) &gt;= 0:</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                    self._info(<span class="stringliteral">&quot;Found {} public key on ssh server.&quot;</span>.format(publicKeyID))</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                    remove = <span class="keyword">True</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                    newAuthKeysList.append(publicKey)</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160; </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="keywordflow">if</span> remove:</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            <span class="comment"># Remove any pre existing tmp auth keys file</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            self.runCmd(<span class="stringliteral">&quot;rm -f %s&quot;</span> % (tmpAuthKeysFile), throwError=<span class="keyword">False</span>)</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160; </div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            <span class="comment"># Create empty tmp auth keys file</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            self.runCmd(<span class="stringliteral">&quot;touch %s&quot;</span> % (tmpAuthKeysFile))</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <span class="keywordflow">for</span> newAuthKey <span class="keywordflow">in</span> newAuthKeysList:</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                self.runCmd(<span class="stringliteral">&quot;echo \&quot;%s\&quot; &gt;&gt; %s&quot;</span> % (newAuthKey, tmpAuthKeysFile), throwError=<span class="keyword">False</span>)</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            <span class="comment"># Remove any pre existing previous auth keys file</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            self.runCmd(<span class="stringliteral">&quot;rm -f %s&quot;</span> % (previousAuthKeysFile), throwError=<span class="keyword">False</span>)</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            <span class="comment"># Move the current auth keys file to the old one and the tmp to the current one</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            self.runCmd(<span class="stringliteral">&quot;mv %s %s&quot;</span> % (authKeysFile, previousAuthKeysFile))</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            self.runCmd(<span class="stringliteral">&quot;mv %s %s&quot;</span> % (tmpAuthKeysFile, authKeysFile))</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            self._info(<span class="stringliteral">&quot;Removed {} public key from the ssh server.&quot;</span>.format(publicKeyID))</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            self._info(<span class="stringliteral">&quot;{} public key not found in ssh server authorised keys file.&quot;</span>.format(publicKeyID))</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160; </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <span class="keywordflow">return</span> remove</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="af5107acdb3ff67313176f4a34e53a225"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5107acdb3ff67313176f4a34e53a225">&#9670;&nbsp;</a></span>runCmd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def runCmd </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>throwError</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>timeout</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Run a command over an ssh session
   @param cmd The command to execute
   @param throwError If True and the command fails throw an error. If False and the command fail return the erorr code etc.
             If throwError is True and the exit status of the command is not 0 then an SSHError will be thrown
   @param timeout The timeout value in seconds or None (default) if no command timeout is required.
   @return A tuple with the following threee elements
      0 - the return code/exit status of the command
      1 - Lines of text from stdout
      2 - lines of text from stderr
</pre> 
<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00380">380</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keyword">def </span>runCmd(self, cmd, throwError=True, timeout=None):</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;@brief Run a command over an ssh session</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="stringliteral">           @param cmd The command to execute</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="stringliteral">           @param throwError If True and the command fails throw an error. If False and the command fail return the erorr code etc.</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="stringliteral">                             If throwError is True and the exit status of the command is not 0 then an SSHError will be thrown</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="stringliteral">           @param timeout The timeout value in seconds or None (default) if no command timeout is required.</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="stringliteral">           @return A tuple with the following threee elements</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="stringliteral">              0 - the return code/exit status of the command</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="stringliteral">              1 - Lines of text from stdout</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="stringliteral">              2 - lines of text from stderr</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="keywordflow">return</span> self._ssh.runCmd(cmd, throwError=throwError, timeout=timeout)</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="abf452c138fb041152d4c7787c0a791a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf452c138fb041152d4c7787c0a791a4">&#9670;&nbsp;</a></span>startCmd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def startCmd </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cmd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">@brief Start executing a command. This will return after starting the command and before the command has completed.
    The following methods maybe called to interrogate the command executions
        channel.exit_status_ready()
        channel.recv_ready()
            channel.channel.recv(len(channel.in_buffer))
        channel.recv_stderr_ready()
            channel.recv_stderr(len(channel.in_stderr_buffer))

        When the command is complete the caller should call channel.close()
   @return A channel instance in which the command is executing.</pre> 
<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00393">393</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keyword">def </span>startCmd(self, cmd):</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;@brief Start executing a command. This will return after starting the command and before the command has completed.</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="stringliteral">                    The following methods maybe called to interrogate the command executions</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="stringliteral">                        channel.exit_status_ready()</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="stringliteral">                        channel.recv_ready()</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="stringliteral">                            channel.channel.recv(len(channel.in_buffer))</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="stringliteral">                        channel.recv_stderr_ready()</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="stringliteral">                            channel.recv_stderr(len(channel.in_stderr_buffer))</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="stringliteral"></span> </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="stringliteral">                        When the command is complete the caller should call channel.close()</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="stringliteral">           @return A channel instance in which the command is executing.</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="stringliteral">           &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="keywordflow">return</span> self._ssh.startCmd(cmd)</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<a id="a5461f7cadaf199660f0ad3c3c9325576"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5461f7cadaf199660f0ad3c3c9325576">&#9670;&nbsp;</a></span>updateAuthorisedKeys()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def updateAuthorisedKeys </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>publicKey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Update the authorised keys file on the remote ssh server with the
   public ssh key</pre> 
<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00469">469</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keyword">def </span>updateAuthorisedKeys(self, publicKey):</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Update the authorised keys file on the remote ssh server with the</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="stringliteral">           public ssh key&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        authKeysFile = self.getRemoteAuthorisedKeyFile()</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        cmd = <span class="stringliteral">&quot;test -d %s&quot;</span> % (authKeysFile)</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        rc, stdoutlines, stderrlines = self.runCmd(cmd, throwError=<span class="keyword">False</span>)</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="keywordflow">if</span> rc == 0:</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            <span class="comment"># If this is a dir with nothing in it, delete it and create an empty</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            <span class="comment"># authorized_keys file.</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            self.runCmd(<span class="stringliteral">&quot;rmdir %s&quot;</span> % (authKeysFile))</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            self.runCmd(<span class="stringliteral">&quot;touch %s&quot;</span> % (authKeysFile))</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        self.runCmd(<span class="stringliteral">&quot;echo \&quot;%s\&quot; &gt;&gt; %s&quot;</span> % (publicKey, authKeysFile))</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        self.runCmd(<span class="stringliteral">&quot;chmod 600 %s&quot;</span> % (authKeysFile))</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="keywordflow">return</span> authKeysFile</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="adb0128662c1afdc399b782c6044a30ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb0128662c1afdc399b782c6044a30ae">&#9670;&nbsp;</a></span>DEFAULT_REMOTE_SSH_AUTH_KEYS_FILE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string DEFAULT_REMOTE_SSH_AUTH_KEYS_FILE = &quot;~/.ssh/authorized_keys&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00125">125</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>

</div>
</div>
<a id="a65c4819af45274af22b9d86b5ed867bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65c4819af45274af22b9d86b5ed867bf">&#9670;&nbsp;</a></span>DEFAULT_SSH_CONNECTION_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int DEFAULT_SSH_CONNECTION_TIMEOUT = 20</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00130">130</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>

</div>
</div>
<a id="a868b0fde222ded483d1c900935cbb5d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a868b0fde222ded483d1c900935cbb5d1">&#9670;&nbsp;</a></span>DROPBEAR_AUTH_KEYS_FILE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string DROPBEAR_AUTH_KEYS_FILE = &quot;%s/authorized_keys&quot; % (DROPBEAR_DIR)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00127">127</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>

</div>
</div>
<a id="aa0bf4066aaa07ef2c63c3dd462ccb485"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0bf4066aaa07ef2c63c3dd462ccb485">&#9670;&nbsp;</a></span>DROPBEAR_DIR</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string DROPBEAR_DIR = &quot;/etc/dropbear&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00126">126</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>

</div>
</div>
<a id="aa4ca93ae6d3ea99d367ba0114ad22772"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4ca93ae6d3ea99d367ba0114ad22772">&#9670;&nbsp;</a></span>LOCAL_SSH_CONFIG_PATH</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">LOCAL_SSH_CONFIG_PATH = os.path.join(os.path.expanduser(&quot;~&quot;), &quot;.ssh&quot;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00124">124</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>

</div>
</div>
<a id="a61bc9407da40be50e88b807e59950eb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61bc9407da40be50e88b807e59950eb2">&#9670;&nbsp;</a></span>PRIVATE_KEY_FILE_LIST</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">list PRIVATE_KEY_FILE_LIST = [&quot;id_rsa&quot;, &quot;id_dsa&quot;, 'id_ecdsa']</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00122">122</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>

</div>
</div>
<a id="a1c1ebf55737e86f832cfcae61deef8d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c1ebf55737e86f832cfcae61deef8d1">&#9670;&nbsp;</a></span>PUBLIC_KEY_FILE_LIST</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">list PUBLIC_KEY_FILE_LIST = [&quot;id_rsa.pub&quot;, &quot;id_dsa.pub&quot;, 'id_ecdsa.pub']</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00123">123</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>

</div>
</div>
<a id="a4cf8380be620bc7a6bd66bb973fbf4dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cf8380be620bc7a6bd66bb973fbf4dc">&#9670;&nbsp;</a></span>SERVER_AUTHORISED_KEYS_FILE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string SERVER_AUTHORISED_KEYS_FILE = &quot;~/.ssh/authorized_keys&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00129">129</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>

</div>
</div>
<a id="a7fe4ecbede677d6d4629eddaf568a19b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fe4ecbede677d6d4629eddaf568a19b">&#9670;&nbsp;</a></span>SSH_COPY_PROG</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string SSH_COPY_PROG = &quot;/usr/bin/ssh-copy-id&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00128">128</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>

</div>
</div>
<a id="a2bf2cf5408f4dedc8b228b30e749cd77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bf2cf5408f4dedc8b228b30e749cd77">&#9670;&nbsp;</a></span>useCompression</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">useCompression</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ssh_8py_source.html#l00283">283</a> of file <a class="el" href="ssh_8py_source.html">ssh.py</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/p3lib/<a class="el" href="ssh_8py_source.html">ssh.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
